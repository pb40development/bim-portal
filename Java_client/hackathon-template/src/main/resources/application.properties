# BIM Portal API Configuration
# Uses environment variables from .env file with sensible defaults

# Application Info
spring.application.name=BIM Portal Java Client

# === API Configuration ===
# Base URL - defaults to production, override with BIM_PORTAL_BASE_URL in .env
bim.portal.base.url=${BIM_PORTAL_BASE_URL:https://via.bund.de/bmdv/bim-portal/edu/bim}

# Timeout configurations
bim.portal.timeout.request=${REQUEST_TIMEOUT:30}
bim.portal.timeout.connect=${CONNECT_TIMEOUT:10}
bim.portal.max.retries=${MAX_RETRIES:3}

# === Authentication Configuration ===
bim.portal.auth.retry.limit=${AUTH_RETRY_LIMIT:1}
bim.portal.token.refresh.margin.minutes=${TOKEN_REFRESH_MARGIN_MINUTES:5}
bim.portal.max.projects.to.test=${MAX_PROJECTS_TO_TEST:10}

# === Export Configuration ===
bim.portal.export.directory=${EXPORT_DIRECTORY:exports}
bim.portal.export.cleanup.days=${EXPORT_CLEANUP_DAYS:30}

# === HTTP Client Configuration ===
bim.portal.ssl.verify=${VERIFY_SSL:true}
bim.portal.follow.redirects=${FOLLOW_REDIRECTS:true}

# === Logging Configuration ===
# Main log level from environment variable
logging.level.root=${LOG_LEVEL:INFO}

# Package-specific logging
logging.level.com.pb40.bimportal=${LOG_LEVEL:INFO}
logging.level.com.bimportal.client=${LOG_LEVEL:INFO}
logging.level.com.bimportal.client.auth=${LOG_LEVEL:INFO}

# Third-party library logging (keep these quieter)
logging.level.feign=${FEIGN_LOG_LEVEL:WARN}
logging.level.okhttp3=${OKHTTP_LOG_LEVEL:WARN}
logging.level.com.fasterxml.jackson=${JACKSON_LOG_LEVEL:WARN}
logging.level.org.springframework.web=${SPRING_WEB_LOG_LEVEL:WARN}
logging.level.org.springframework.security=${SPRING_SECURITY_LOG_LEVEL:WARN}

# === Spring Boot Configuration ===
# Server configuration (if running as web app)
server.port=${SERVER_PORT:8080}
server.servlet.context-path=${CONTEXT_PATH:/}

# === Development/Debug Configuration ===
# Enable debug logging for development
logging.level.org.springframework.boot.autoconfigure=${SPRING_BOOT_LOG_LEVEL:WARN}
logging.level.org.springframework.context=${SPRING_CONTEXT_LOG_LEVEL:WARN}

# === Actuator Configuration (for monitoring) ===
management.endpoints.enabled-by-default=${ACTUATOR_ENABLED:false}
management.endpoint.health.enabled=${HEALTH_ENDPOINT_ENABLED:true}
management.endpoint.info.enabled=${INFO_ENDPOINT_ENABLED:true}

# === Profile-specific Configuration ===
# Default profile
spring.profiles.active=${SPRING_PROFILES_ACTIVE:default}

# === Jackson Configuration ===
spring.jackson.serialization.write-dates-as-timestamps=false
spring.jackson.serialization.write-date-timestamps-as-nanoseconds=false
spring.jackson.deserialization.read-date-timestamps-as-nanoseconds=false
spring.jackson.deserialization.fail-on-unknown-properties=false
